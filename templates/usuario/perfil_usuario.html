<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Perfil do Usuário</title>
  
  <!-- Link para o novo CSS -->
  <link rel="stylesheet" href="/static/estilos/perfil_dados.css">
  
  <!-- Fontes e Ícones do design de perfil de hotel -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>

  <!-- Overlay para o menu lateral -->
  <div id="overlay" class="sidebar-overlay" onclick="toggleSidebar()"></div>

  <!-- Menu Lateral (Sidebar) -->
  <aside id="sidebar" class="sidebar">
    <div class="sidebar-header">
      <h2>Menu</h2>
    </div>
    <nav class="sidebar-nav">
      <a href="/"><i class="fa-solid fa-house"></i> Início</a>
      <a href="/quem_somos"><i class="fa-solid fa-users"></i> Quem Somos</a>
      <a href="/"><i class="fa-solid fa-bed"></i> Quartos</a>
      <a href="/pontos"><i class="fa-solid fa-map-location-dot"></i> Pontos Turísticos</a>
      <a href="/contato"><i class="fa-solid fa-envelope"></i> Contato</a>
      <a href="/templates/projeto.html"><i class="fa-solid fa-diagram-project"></i> Projeto</a>
    </nav>
  </aside>

  <div class="page-wrapper">
    <!-- Cabeçalho -->
    <header class="header">
      <div class="header-content">
        <div class="header-left">
          <button class="menu-btn" onclick="toggleSidebar()">
            <i class="fas fa-bars"></i>
          </button>
          <h1>Meu Perfil</h1>
        </div>
        <div class="header-right">
           <a href="/editar_perfil_usuario" class="btn btn-edit">
              <i class="fas fa-pencil-alt"></i>
              <span>Editar Perfil</span>
            </a>
            <a href="/sair" class="btn btn-logout">
              <i class="fas fa-sign-out-alt"></i>
              <span>Fazer Logout</span>
            </a>
        </div>
      </div>
    </header>

    <!-- Conteúdo Principal -->
    <main class="main-content">
      <div class="grid-layout">
        
        <!-- Coluna do Perfil -->
        <div class="profile-column">
          <section class="card profile-card">
            <div class="profile-photo-wrapper">
              <img src="{{ url_for('static', filename=usuario.imagem) }}" alt="Foto do usuário" class="profile-photo">
            </div>
            
            <h2 class="profile-name">{{session['usuario']['nome']}}</h2>
            
            <div class="profile-info">
              <p><i class="fa-solid fa-envelope"></i> <span>{{session['usuario']['email']}}</span></p>
              <p><i class="fa-solid fa-id-card"></i> <span>CPF: {{session['usuario']['cpf']}}</span></p>
            </div>

            <!-- Botões para telas menores -->
            <div class="mobile-buttons">
              <a href="/editar_perfil_usuario" class="btn btn-edit">
                <i class="fas fa-pencil-alt"></i>
                <span>Editar Perfil</span>
              </a>
              <a href="/sair" class="btn btn-logout">
                <i class="fas fa-sign-out-alt"></i>
                <span>Fazer Logout</span>
              </a>
            </div>
          </section>
        </div>

        <!-- Coluna das Reservas -->
        <div class="reservations-column">
          <section class="card">
            <h2 class="section-title">Minhas Reservas</h2>
            <div class="table-wrapper">
              <table class="reservations-table">
                <thead>
                  <tr>
                    <th>Hotel</th>
                    <th>Quarto</th>
                    <th>Período</th>
                    <th>Ação</th>
                  </tr>
                </thead>
                <tbody>
                  {% if reservas %}
                    {% for item in reservas %}
                      <tr>
                        <td data-label="Hotel">
                          <div class="text-bold">{{ item.hotel.nome }}</div>
                          <div class="text-small">{{ item.hotel.cidade }}</div>
                        </td>
                        <td data-label="Quarto">
                          <div class="text-bold">Nº {{ item.quarto.numero_quarto }}</div>
                          <div class="text-small">{{ item.quarto.andar }}º Andar</div>
                        </td>
                        <td data-label="Período">
                          <div><span class="text-bold">Check-in:</span> {{ item.checkin }}</div>
                          <div><span class="text-bold">Check-out:</span> {{ item.checkout }}</div>
                        </td>
                        <td data-label="Ação">
                          <form action="/cancelar_reserva" method="post" class="form-cancel">
                            <input type="hidden" name="id_reserva" value="{{ item.reserva.id_reserva }}">
                            <button type="submit" class="btn-cancel">Cancelar</button>
                          </form>
                        </td>
                      </tr>
                    {% endfor %}
                  {% else %}
                    <tr>
                      <td colspan="4" class="no-reservations">
                        <i class="fas fa-bed"></i>
                        <p class="text-bold">Nenhuma reserva encontrada.</p>
                        <p class="text-small">Quando você fizer uma reserva, ela aparecerá aqui.</p>
                      </td>
                    </tr>
                  {% endif %}
                </tbody>
              </table>
            </div>
          </section>
        </div>
      </div>
    </main>
  </div>

  <script>
    function toggleSidebar() {
      document.getElementById("sidebar").classList.toggle("active");
      document.getElementById("overlay").classList.toggle("active");
    }
  </script>

</body>
</html>
